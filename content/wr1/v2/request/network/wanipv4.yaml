
type: "object"
properties:
  ipv4:
    type: object
    oneOf:
    - $ref: '#/components/schemas/option1'
    - $ref: '#/components/schemas/option2'
    - $ref: '#/components/schemas/option3'

components:
  schemas:
    option1:
      type: "object"
      properties:
        dns:
          type: "array"
          items:
            type: "string"
            format: "ipv4"
        proto:
          type: "string"
          enum:
            - "static"
          description: "type of networking"
        netmask:
          type: "string"
          format: "ipv4"
        ip_address:
          type: "string"
          format: "ipv4"
        gateway:
          type: "string"
          format: "ipv4"
      additionalProperties: false
      required:
        - "proto"
    option2:
      type: "object"
      properties:
        dns:
          type: "array"
          items:
            type: "string"
            format: "ipv4"
        proto:
          type: "string"
          enum:
            - "dhcp"
          description: "type of networking"
      additionalProperties: false
      required:
        - "proto"
    option3:
      type: "object"
      properties:
        mtu:
          type: "number"
          minimum: 576
          maximum: 1500
        dns:
          type: "array"
          items:
            type: "string"
            format: "ipv4"
        proto:
          type: "string"
          enum:
            - "pppoe"
          description: "type of networking"
        username:
          type: "string"
        password:
          type: "string"
        mtu_path:
          type: "boolean"
      additionalProperties: false
      required:
        - "mtu"
        - "proto"
example:
  {
    "ip_address": "78.24.109.219",
    "proto": "static",
    "dns": [
      "8.8.8.8",
      "8.8.4.4"
    ],
    "gateway": "78.24.109.209",
    "netmask": "255.255.255.240"
  }
